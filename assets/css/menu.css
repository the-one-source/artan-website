/* =================== Menu Overlay — RealEstateAbbey-inspired =================== */
/*
  Scope: Only styles the full-screen menu overlay and its contents.
  Depends on existing markup:
    #menu-overlay.menu-overlay
      .menu-overlay-inner
        nav.menu-nav
          ul.menu-list
            a.menu-link

  Optional (if menu.js injects it):
    .menu-preview (left panel)
*/

:root {
  /* Menu accent can be updated by JS on hover (e.g., overlay.style.setProperty('--menu-accent', value)) */
  --menu-accent: var(--color-primary1);
  --menu-surface: rgba(0, 0, 0, 0.94);
  --menu-surface-strong: rgba(0, 0, 0, 0.92);
  --menu-border: rgba(255, 255, 255, 0.18);
  --menu-sep: rgba(255, 255, 255, 0.14);
}

/* =================== Menu Overlay Logo Safety =================== */
/* Force compact luxury size for ANY logo markup that might exist inside the menu overlay */
#menu-overlay .menu-logo,
#menu-overlay .menu-logo svg,
#menu-overlay .menu-logo img,
#menu-overlay .site-logo,
#menu-overlay .site-logo svg,
#menu-overlay .site-logo img,
#menu-overlay .logo,
#menu-overlay .logo svg,
#menu-overlay .logo img,
#menu-overlay .logo-container,
#menu-overlay .logo-container svg,
#menu-overlay .logo-container img {
  width: 72px !important;
  height: auto !important;
  max-width: 72px !important;
  max-height: 72px !important;
  display: block !important;
  transform: none !important;
}

/* If the menu overlay uses a TEXT logo (e.g., <h1 class="site-logo">ARTAN</h1>) */
#menu-overlay .site-logo,
#menu-overlay h1.site-logo,
#menu-overlay .logo-text {
  font-size: 0.9rem !important;
  letter-spacing: 0.12em !important;
  margin: 0 !important;
  line-height: 1.1 !important;
  max-width: 18ch !important;
  white-space: nowrap !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
}

/* Prevent any menu overlay logo from taking over layout */
#menu-overlay .menu-overlay-inner .menu-logo,
#menu-overlay .menu-overlay-inner .site-logo,
#menu-overlay .menu-overlay-inner .logo,
#menu-overlay .menu-overlay-inner .logo-container {
  position: relative !important;
  inset: auto !important;
}

/* =================== Overlay Shell =================== */
#menu-overlay.menu-overlay {
  position: fixed;
  inset: 0;
  z-index: 99999; /* sits above header + stage; below country overlay if needed */

  display: grid;
  place-items: center;

  opacity: 0;
  visibility: hidden;
  pointer-events: none;

  /* Glass + gradient wash */
  background:
    radial-gradient(1200px 900px at 85% 25%, color-mix(in srgb, var(--menu-accent) 18%, transparent) 0%, transparent 62%),
    linear-gradient(90deg, rgba(0,0,0,0.96) 0%, rgba(0,0,0,0.94) 55%, rgba(0,0,0,0.98) 100%);

  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);

  transition: opacity 260ms ease, visibility 260ms ease;
}

/* Open state (supports either .is-open class or [aria-hidden] toggling) */
#menu-overlay.menu-overlay.is-open,
#menu-overlay.menu-overlay[aria-hidden="false"],
#menu-overlay.active {
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
}

/* Override legacy menu-overlay animation rules from style.css so items actually render */
#menu-overlay .menu-overlay-inner {
  opacity: 1 !important;
  transform: none !important;
}
#menu-overlay .menu-list li {
  opacity: 1 !important;
  transform: none !important;
}

/* =================== Inner Layout =================== */
/* Left preview + right menu column */
#menu-overlay .menu-overlay-inner {
  width: min(1200px, 92vw);
  height: min(720px, 84vh);

  display: grid;
  grid-template-columns: 84px 1fr minmax(320px, 420px);
  gap: 0;

  border: 1px solid var(--menu-border);
  border-radius: 18px;
  overflow: hidden;

  background: linear-gradient(180deg, rgba(0,0,0,0.58) 0%, rgba(0,0,0,0.78) 100%);
}

/* Left preview panel (optional, only if present) */
#menu-overlay .menu-preview {
  position: relative;
  padding: clamp(1.4rem, 3vw, 2.4rem);
  display: grid;
  align-content: end;

  background:
    radial-gradient(900px 700px at 20% 20%, color-mix(in srgb, var(--menu-accent) 22%, transparent) 0%, transparent 62%),
    linear-gradient(180deg, rgba(0,0,0,0.55) 0%, rgba(0,0,0,0.85) 100%);
}

#menu-overlay .menu-preview-title {
  font-size: clamp(1.6rem, 3.4vw, 3.1rem);
  line-height: 1.08;
  letter-spacing: 0.02em;
  font-weight: 600;
  color: var(--text-color);
  margin: 0;
}

#menu-overlay .menu-preview-subtitle {
  margin: 0.8rem 0 0;
  max-width: 42ch;
  font-size: 0.95rem;
  line-height: 1.55;
  color: var(--text-secondary-color);
  opacity: 0.92;
}

/* Right menu column */
#menu-overlay .menu-nav {
  position: relative;
  display: grid;
  align-content: center;

  padding: clamp(1.2rem, 2.4vw, 2.2rem);
  background: linear-gradient(180deg, rgba(0,0,0,0.88) 0%, rgba(0,0,0,0.96) 100%);
  border-left: 1px solid var(--menu-border);
}

#menu-overlay .menu-list {
  list-style: none;
  margin: 0;
  padding: 0;

  display: grid;
  gap: 0;
}

/* Item rows + separators */
#menu-overlay .menu-list li {
  position: relative;
}

#menu-overlay .menu-list li + li {
  border-top: 1px solid var(--menu-sep);
}

/* The “vertical line” feel (right column spine) */
#menu-overlay .menu-list {
  border-right: 1px solid var(--menu-border);
}

/* Links */
#menu-overlay .menu-link {
  display: grid;
  grid-template-columns: 1fr;

  padding: 1.05rem 0.2rem 1.05rem 0.2rem;

  text-decoration: none;
  color: var(--text-color);

  font-size: 1.05rem;
  letter-spacing: 0.04em;
  text-transform: uppercase;

  opacity: 0.92;
  transform: translateX(0);
  transition:
    transform 220ms ease,
    opacity 220ms ease,
    letter-spacing 220ms ease,
    color 220ms ease;
}

#menu-overlay .menu-link:hover,
#menu-overlay .menu-link:focus-visible {
  opacity: 1;
  letter-spacing: 0.07em;
  color: var(--text-color);
  transform: translateX(-10px);
  outline: none;
}

/* Active/hover growth effect (JS can add .is-active on li) */
#menu-overlay .menu-list li.is-active .menu-link {
  opacity: 1;
  transform: translateX(-14px);
}

/* Subtle “push” for siblings (JS can add .is-dim on non-active lis) */
#menu-overlay .menu-list li.is-dim .menu-link {
  opacity: 0.55;
  transform: translateX(-4px);
}

/* =================== Reduced Motion =================== */
@media (prefers-reduced-motion: reduce) {
  #menu-overlay.menu-overlay,
  #menu-overlay .menu-link {
    transition: none !important;
  }
}

/* =================== Mobile =================== */
@media (max-width: 820px) {
  #menu-overlay .menu-overlay-inner {
    width: min(720px, 92vw);
    height: min(760px, 86vh);
    grid-template-columns: 1fr;
    grid-template-rows: auto auto 1fr;
  }

  #menu-overlay .menu-nav {
    border-left: none;
    border-top: 1px solid var(--menu-border);
  }

  #menu-overlay .menu-list {
    border-right: none;
  }

  #menu-overlay .menu-link:hover,
  #menu-overlay .menu-link:focus-visible {
    transform: translateX(-6px);
  }

  #menu-overlay .menu-rail {
    grid-column: 1;
    grid-row: 1;
    height: auto;
    min-height: 0;
    border-right: none;
    border-bottom: 1px solid var(--menu-border);
    padding: 0.9rem 0.9rem;

    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    gap: 0.9rem;
  }

  #menu-overlay .menu-rail-top,
  #menu-overlay .menu-rail-mid,
  #menu-overlay .menu-rail-bottom {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 0.7rem;
  }

  #menu-overlay .menu-rail-pack {
    flex-direction: row;
    gap: 0.7rem;
  }
}
/* =================== Menu Rail Logo (size-safe, scalable) =================== */
.menu-rail-logo{
  width: clamp(28px, 3.2vw, 44px);
  height: auto;
  max-width: 100%;
  display: block;
}

/* Guard against any global img/svg sizing rules bleeding into the menu */
.menu-overlay img,
.menu-overlay svg{
  max-width: 100%;
  height: auto;
}

/* If any global rule forces images to stretch, override only for the rail logo */
.menu-overlay .menu-rail-logo{
  width: clamp(28px, 3.2vw, 44px) !important;
  height: auto !important;
  max-height: 44px;
}

/* =================== Menu Rail (Left Column) =================== */
/* Markup expected (additive, safe):
   <aside class="menu-rail">
     <div class="menu-rail-top">
       <button class="menu-rail-toggle" aria-label="Toggle social / streams"></button>
       <a class="menu-rail-icon" href="profile.html" aria-label="Profile">...</a>
       <a class="menu-rail-icon" href="#" aria-label="Inquiry">...</a>
     </div>
     <div class="menu-rail-mid">
       <div class="menu-rail-pack menu-pack-stream">...</div>
       <div class="menu-rail-pack menu-pack-social">...</div>
     </div>
     <div class="menu-rail-bottom">
       <img class="menu-rail-logo" src="assets/images/logo.svg" alt="Artan">
     </div>
   </aside>
*/

#menu-overlay .menu-rail {
  grid-column: 1;
  position: relative;
  height: 100%;
  padding: 1.2rem 0.9rem;

  display: grid;
  grid-template-rows: auto 1fr auto;
  align-items: start;

  background: linear-gradient(180deg, rgba(0,0,0,0.72) 0%, rgba(0,0,0,0.92) 100%);
  border-right: 1px solid var(--menu-border);
}

#menu-overlay .menu-rail-top {
  display: grid;
  gap: 0.9rem;
  justify-items: center;
}

#menu-overlay .menu-rail-mid {
  display: grid;
  align-content: center;
  justify-items: center;
  gap: 1.2rem;
  padding-top: 1.2rem;
}

#menu-overlay .menu-rail-bottom {
  display: grid;
  justify-items: center;
  align-content: end;
  padding-top: 1.2rem;
}

/* Rail separator line (matches footer discipline) */
#menu-overlay .menu-rail::after {
  content: "";
  position: absolute;
  top: 1.2rem;
  bottom: 1.2rem;
  right: 0;
  width: 1px;
  background: var(--menu-sep);
  opacity: 0.75;
}

/* Toggle button (the small dot) */
#menu-overlay .menu-rail-toggle {
  width: 10px;
  height: 10px;
  border-radius: 999px;
  border: 1px solid var(--menu-border);
  background: color-mix(in srgb, var(--menu-accent) 40%, transparent);
  cursor: pointer;
  transition: transform 180ms ease, opacity 180ms ease, background-color 180ms ease;
}
#menu-overlay .menu-rail-toggle:hover { transform: scale(1.15); opacity: 0.95; }

/* Rail icons */
#menu-overlay .menu-rail-icon {
  width: 34px;
  height: 34px;
  border-radius: 999px;
  border: 1px solid var(--menu-border);
  display: grid;
  place-items: center;
  text-decoration: none;
  color: var(--text-color);
  opacity: 0.9;
  transition: transform 180ms ease, opacity 180ms ease, border-color 180ms ease;
}
#menu-overlay .menu-rail-icon:hover,
#menu-overlay .menu-rail-icon:focus-visible {
  transform: scale(1.08);
  opacity: 1;
  border-color: color-mix(in srgb, var(--menu-accent) 55%, var(--menu-border));
  outline: none;
}

/* Packs (streams vs social) */
#menu-overlay .menu-rail-pack {
  display: grid;
  gap: 0.9rem;
  justify-items: center;
}

/* Default: show stream pack */
#menu-overlay .menu-pack-stream { opacity: 1; pointer-events: auto; transform: translateY(0); }
#menu-overlay .menu-pack-social { opacity: 0; pointer-events: none; transform: translateY(6px); }

/* Hover-to-switch: when hovering the toggle OR the whole rail-top area, swap packs */
#menu-overlay .menu-rail-top:hover ~ .menu-rail-mid .menu-pack-stream,
#menu-overlay .menu-rail-toggle:hover ~ .menu-rail-icon ~ .menu-rail-mid .menu-pack-stream {
  opacity: 0;
  pointer-events: none;
  transform: translateY(-6px);
}

#menu-overlay .menu-rail-top:hover ~ .menu-rail-mid .menu-pack-social,
#menu-overlay .menu-rail-toggle:hover ~ .menu-rail-icon ~ .menu-rail-mid .menu-pack-social {
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0);
}

#menu-overlay .menu-pack-stream,
#menu-overlay .menu-pack-social {
  transition: opacity 180ms ease, transform 180ms ease;
}

/* Pack icon buttons */
#menu-overlay .menu-rail-pack a {
  width: 38px;
  height: 38px;
  border-radius: 12px;
  border: 1px solid var(--menu-border);
  display: grid;
  place-items: center;
  color: var(--text-color);
  text-decoration: none;
  opacity: 0.9;
  transition: transform 180ms ease, opacity 180ms ease, border-color 180ms ease;
}
#menu-overlay .menu-rail-pack a:hover,
#menu-overlay .menu-rail-pack a:focus-visible {
  transform: scale(1.08);
  opacity: 1;
  border-color: color-mix(in srgb, var(--menu-accent) 55%, var(--menu-border));
  outline: none;
}

/* Place preview + nav into their columns (safe even if preview is missing) */
#menu-overlay .menu-preview { grid-column: 2; }
#menu-overlay .menu-nav { grid-column: 3; }

/* Ensure right menu stays visually “vertical” and aligned like your sketch */
#menu-overlay .menu-list { border-right: none; }
#menu-overlay .menu-nav { border-left: 1px solid var(--menu-border); }

/* Close button (top-center) if present in markup */
#menu-overlay .menu-close {
  position: absolute;
  top: 18px;
  left: 50%;
  transform: translateX(-50%);
  width: 44px;
  height: 44px;
  border-radius: 999px;
  border: 1px solid var(--menu-border);
  background: transparent;
  color: var(--text-color);
  display: grid;
  place-items: center;
  cursor: pointer;
  opacity: 0.85;
  transition: transform 180ms ease, opacity 180ms ease, border-color 180ms ease;
}
#menu-overlay .menu-close:hover { transform: translateX(-50%) scale(1.08); opacity: 1; border-color: color-mix(in srgb, var(--menu-accent) 55%, var(--menu-border)); }